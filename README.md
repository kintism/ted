This is the supporting tool of the paper [Detecting Trivial Mutant
Equivalences via Compiler Optimisations](http://pages.cs.aueb.gr/~kintism/papers/tce/) by Marinos Kintis, Mike Papadakis, Yue
Jia, Nicos Malevris, Yves Le Traon and Mark Harman.

TeD (Trivial Equivalent mutant Detector) is used to detect trivially equivalent
mutants generated by the [mujava](https://cs.gmu.edu/~offutt/mujava/) mutation
testing framework for the Java programming language. More information about the
tool and the underlying technique can be found [here.](http://pages.cs.aueb.gr/~kintism/papers/tce/)

Note that TeD utilises the [Soot](http://sable.github.io/soot/) program
analysis framework, is written in [Jython](http://www.jython.org/) and runs on
GNU/Linux-based operating systems.

# Usage

    $ cd /path/to/TeD
    $ jython ./src/main.py -h
    
    usage: main.py [-h] --rt_jar RT_JAR --soot SOOT --mujava_res MUJAVA_RES
                   --exp_dir EXP_DIR [--methods [METHODS [METHODS ...]]]
                   [--mutants MUTANTS]
                   [--action {Opt,Ned,Ted,Ned-dupes,Ted-dupes}]
    
    Trivial Equivalent mutant Detector: TCE for Java
    
    optional arguments:
      -h, --help            show this help message and exit
      --rt_jar RT_JAR       path to the =rt.jar= file
      --soot SOOT           path to the =soot-trunk.jar= file
      --mujava_res MUJAVA_RES
                            path to the directory that contains the mutants that
                            were generated by mujava
      --exp_dir EXP_DIR     path to the experiments directory. The directory must
                            include a =bin/= directory with the classes of the
                            project as used by mujava and an =optimisations/=
                            directory
      --methods [METHODS [METHODS ...]]
                            method(s) to be considered; if not provided, consider
                            all methods. Note that the names of the methods are
                            the ones returned by mujava
      --mutants MUTANTS     the maximum number of mutants to optimise; if not
                            provided, optimise them all
      --action {Opt,Ned,Ted,Ned-dupes,Ted-dupes}
                            The analysis to be performed: Opt: Optimisation via
                            Soot; Ned: TCE via javac; Ted: TCE via Soot;
                            {Ned,Ted}-dupes: Duplicated mutant detection

From the above arguments, five are mandatory: `--rt_jar`, `--soot`,
`--mujava_res`, `--exp_dir`, `--action`; the remaining ones are optional and
affect the method(s) and the number of mutants that TeD will consider.

Note that the current version of the tool does **not** handle inner classes; the
corresponding mutants must be removed before the application of the tool.

# An example

For the purposes of this example, the following files are used:

-   [Triangle class files](http://pages.cs.aueb.gr/~kintism/papers/tce/java_exp/tr_example/Triangle_classes.zip)
-   [Triangle mutants](http://pages.cs.aueb.gr/~kintism/papers/tce/java_exp/tr_example/Triangle_result.zip)

## Optimisation Phase

    $ cd /path/to/TeD
    jython ./src/main.py --rt_jar /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.65-13.b17.fc23.x86_64/jre/lib/rt.jar --soot ~/Desktop/soot/soot-trunk.jar --mujava_res ~/Workbench/mujava/result/ --exp_dir ~/Desktop/tr_example/ --action Opt

The above code will create the `Triangle/optimised-original` and
`Triangle/int_classify(int,int,int)` directories in `exp_dir/optimisation`.

## Equivalent Mutant Detection via javac

    jython ./src/main.py --rt_jar /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.65-13.b17.fc23.x86_64/jre/lib/rt.jar --soot ~/Desktop/soot/soot-trunk.jar --mujava_res ~/Workbench/mujava/result/ --exp_dir ~/Desktop/tr_example/ --action Ned

The above command returns:

    ******** Summary ********
    Mutants of class  tr.Triangle
      Mutants of method  int_classify(int,int,int)
      Equivalent mutants detected  0
    
    
      Total muts handled:  0
    
    Finished:  1.38700008392  secs
    
    *** Statistics ***
    MutOps for all mutants
    AOIS | AOIU | AORB | COI | COR | LOI | ROR |
     128 |   11 |   36 |  24 |  14 |  43 |  98 |
      Total muts handled:  354
    
    
    MutOps for equivalent mutants
    
    
      Total muts handled:  0
    
    
    
      Total muts handled:  0

## Duplicated Mutant Detection via javac

Note that the duplicated mutant detection includes the equivalent mutant
detection phase.

    jython ./src/main.py --rt_jar /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.65-13.b17.fc23.x86_64/jre/lib/rt.jar --soot ~/Desktop/soot/soot-trunk.jar --mujava_res ~/Workbench/mujava/result/ --exp_dir ~/Desktop/tr_example/ --action Ned-dupes

The obtained output is:

    ******** Summary ********
    Mutants of class  tr.Triangle
      Mutants of method  int_classify(int,int,int)
      Number of muts  354
    AOIS | AOIU | AORB | COI | COR | LOI | ROR |
     128 |   11 |   36 |  24 |  14 |  43 |  98 |
      Total muts handled:  354
    
      Mutants: [duplicated]
         COI_7 :  ['ROR_33']
         COI_6 :  ['ROR_26']
         COI_9 :  ['ROR_47']
         COI_4 :  ['ROR_15']
         COI_1 :  ['ROR_1']
         ROR_8 :  ['COI_2']
         COI_15 :  ['ROR_52']
         COI_20 :  ['ROR_80']
         COI_23 :  ['ROR_94']
         ROR_40 :  ['COI_8']
         ROR_89 :  ['COI_22']
         ROR_75 :  ['COI_19']
         ROR_66 :  ['COI_17']
         ROR_61 :  ['COI_16']
    COI | ROR |
     14 |  14 |
      Total muts handled:  28
    
    Stats
             COI |          ROR |
       14 (0.58) |    14 (0.14) |
      Total muts handled:  28
    
    Total number of Duplicated muts: 14 (0.04)
    Finished:  128.646000147  secs
    
    *** Total Statistics ***
    
     ** ALL MUTS ** 
    AOIS | AOIU | AORB | COI | COR | LOI | ROR |
     128 |   11 |   36 |  24 |  14 |  43 |  98 |
      Total muts handled:  354
    
     ** DUP MUTS ** 
             COI |          ROR |
       14 (0.58) |    14 (0.14) |
      Total muts handled:  28
    
    
    Total number of Duplicated muts: 14 (0.04)
    Total muts:  354

## Equivalent Mutant Detection via Soot

Before running this command, the optimised classes must be present.

    jython ./src/main.py --rt_jar /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.65-13.b17.fc23.x86_64/jre/lib/rt.jar --soot ~/Desktop/soot/soot-trunk.jar --mujava_res ~/Workbench/mujava/result/ --exp_dir ~/Desktop/tr_example/ --action Ted

This command will output:

    ******** Summary ********
    Mutants of class  Triangle
      Mutants of method  int_classify(int,int,int)
      Number of muts  354
      Mutants 
         AORB_2
         ROR_58
         COR_8
         AOIS_129
         COI_12
         AOIS_117
         AORB_29
         ROR_47
         COR_9
         ROR_12
         LOI_20
         AOIS_19
         LOI_23
         AOIS_1
         ROR_82
         ROR_71
         COI_16
         AORB_1
         LOI_15
         AOIS_132
         AOIS_131
         COI_10
         AORB_3
         COI_2
         AOIS_68
         AOIS_127
         LOI_41
         ROR_25
         LOI_19
         AOIS_100
         ROR_13
         LOI_27
         ROR_96
         ROR_7
         AOIS_38
         AORB_31
         AOIS_57
         ROR_92
         LOI_24
         ROR_38
         AOIS_40
         AOIS_26
         AOIS_103
         AOIU_10
         AOIS_74
         AOIS_66
         ROR_72
         COR_11
         AOIS_73
         COI_1
         AORB_34
         AOIS_49
         ROR_51
         LOI_29
         LOI_28
         AOIS_39
         LOI_30
         AOIS_128
         AOIS_50
         ROR_10
         COR_1
         AOIS_35
         LOI_21
         AOIS_135
         LOI_25
         AOIS_69
         AOIS_58
         ROR_48
         ROR_50
         AORB_20
         LOI_43
         COI_24
         AOIS_8
         ROR_27
         ROR_3
         AOIS_78
         AOIS_32
         ROR_63
         AOIS_31
         AOIS_28
         ROR_94
         AORB_24
         AOIS_70
         COR_4
         ROR_20
         ROR_22
         ROR_59
         AORB_8
         COI_5
         COI_23
         AOIU_9
         AORB_32
         AOIS_37
         ROR_14
         ROR_18
         ROR_35
         AOIS_107
         ROR_83
         ROR_73
         ROR_81
         LOI_40
         AOIS_55
         AOIS_119
         AOIS_111
         AOIS_34
         ROR_44
         COI_21
         ROR_77
         AOIS_6
         AOIU_5
         AOIS_95
         ROR_23
         COR_10
         AOIS_99
         ROR_53
         AORB_28
         ROR_54
         ROR_85
         AORB_16
         ROR_19
         AOIS_77
         ROR_11
         ROR_43
         AOIS_27
         AOIS_124
         COR_2
         AOIS_23
         AORB_11
         COI_19
         COR_13
         ROR_93
         AOIS_20
         ROR_42
         ROR_66
         COI_17
         LOI_35
         AOIS_59
         AORB_36
         ROR_84
         ROR_79
         COI_22
         COI_7
         AOIS_121
         AOIS_136
         LOI_2
         AOIU_6
         ROR_2
         AOIS_64
         LOI_16
         AOIS_12
         AORB_30
         ROR_45
         COI_18
         AOIS_21
         AOIS_98
         ROR_39
         ROR_30
         AOIS_22
         AORB_26
         LOI_1
         LOI_3
         AOIS_101
         AOIS_90
         AOIS_133
         AOIS_115
         AOIS_122
         ROR_76
         COI_20
         ROR_29
         AOIS_140
         LOI_36
         LOI_26
         ROR_60
         AOIS_11
         AOIS_63
         AOIS_10
         AORB_13
         AOIS_9
         LOI_34
         COR_14
         COI_9
         AORB_18
         AOIS_104
         AOIS_62
         AORB_4
         AOIS_120
         AOIS_46
         LOI_39
         AOIS_56
         AOIS_137
         COR_3
         AOIS_47
         COI_11
         LOI_13
         ROR_57
         AOIS_4
         AOIS_18
         AOIS_123
         AOIS_61
         AORB_15
         AOIS_45
         AORB_17
         ROR_28
         LOI_31
         AORB_22
         AOIS_16
         ROR_46
         COI_15
         ROR_1
         ROR_91
         AOIS_83
         LOI_33
         AOIS_29
         AORB_27
         AOIS_5
         LOI_14
         ROR_80
         LOI_4
         AOIS_134
         ROR_98
         AORB_35
         AOIS_71
         LOI_8
         LOI_18
         LOI_42
         AOIU_8
         LOI_38
         AOIS_112
         AORB_23
         COI_8
         AOIS_102
         LOI_11
         ROR_86
         AOIS_97
         COR_6
         ROR_9
         ROR_78
         ROR_89
         AORB_9
         COI_13
         AOIS_53
         LOI_9
         AOIS_41
         AOIS_24
         AOIS_3
         LOI_17
         ROR_68
         ROR_15
         ROR_70
         AOIS_67
         ROR_5
         AOIS_91
         COR_5
         LOI_12
         AOIS_54
         AOIU_2
         AOIS_82
         AORB_12
         AOIS_51
         COR_12
         AOIS_76
         AOIU_1
         ROR_97
         ROR_8
         ROR_16
         AOIS_30
         ROR_61
         AOIS_75
         ROR_32
         AOIS_116
         AOIS_96
         AORB_25
         ROR_90
         AOIS_2
         LOI_6
         AOIS_113
         AORB_21
         AORB_6
         AOIS_7
         ROR_26
         ROR_88
         ROR_24
         ROR_33
         AOIS_17
         ROR_75
         ROR_31
         AOIU_3
         AOIS_15
         LOI_22
         ROR_17
         AORB_19
         AOIS_65
         ROR_41
         ROR_95
         AORB_10
         AORB_33
         ROR_4
         LOI_37
         LOI_7
         AOIS_108
         ROR_34
         COI_14
         AOIS_42
         AOIS_79
         AOIS_106
         AOIS_72
         AOIS_81
         LOI_10
         AOIS_105
         AOIS_60
         ROR_62
         ROR_65
         AOIS_25
         AOIS_92
         AOIS_118
         AORB_7
         ROR_21
         AOIS_138
         COI_4
         AOIS_33
         ROR_69
         AOIS_36
         AOIS_84
         AORB_5
         ROR_56
         COI_3
         ROR_52
         ROR_67
         AOIU_7
         AOIS_139
         ROR_40
         AOIS_130
         ROR_55
         COI_6
         ROR_87
         AOIS_48
         AOIS_43
         AOIS_80
         ROR_49
         AOIU_4
         COR_7
         ROR_74
         AOIS_52
         LOI_5
         AOIS_89
         AOIS_44
         AORB_14
         AOIS_114
         ROR_64
         ROR_6
         ROR_37
         AOIU_11
         LOI_32
         ROR_36
    AOIS | AOIU | AORB | COI | COR | LOI | ROR |
     128 |   11 |   36 |  24 |  14 |  43 |  98 |
      Total muts handled:  354
    
      Equivalent mutants detected  21
         AOIS_129
         AOIS_38
         AOIS_26
         AOIS_49
         AOIS_50
         AOIS_78
         AOIS_37
         AOIS_77
         AOIS_133
         AOIS_140
         AOIS_137
         AOIS_83
         AOIS_134
         AOIU_2
         AOIS_82
         AOIS_81
         AOIS_25
         AOIS_138
         AOIS_84
         AOIS_139
         AOIS_130
    AOIS | AOIU |
      20 |    1 |
      Total muts handled:  21
    
    Finished:  1.65199995041  secs
    
    *** Statistics ***
    MutOps for all mutants
    AOIS | AOIU | AORB | COI | COR | LOI | ROR |
     128 |   11 |   36 |  24 |  14 |  43 |  98 |
      Total muts handled:  354
    
    
    MutOps for equivalent mutants
    AOIS | AOIU |
      20 |    1 |
      Total muts handled:  21
    
             AOIS |         AOIU |
        20 (0.16) |     1 (0.09) |
      Total muts handled:  21

## Duplicated Mutant Detection via Soot

Before running this command, the optimised classes must be present. Note that
this phase also includes the equivalent mutant detection one.

    jython ./src/main.py --rt_jar /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.65-13.b17.fc23.x86_64/jre/lib/rt.jar --soot ~/Desktop/soot/soot-trunk.jar --mujava_res ~/Workbench/mujava/result/ --exp_dir ~/Desktop/tr_example/ --action Ted-dupes

The corresponding output is:

    ******** Summary ********
    Mutants of class  Triangle
      Mutants of method  int_classify(int,int,int)
      Number of muts  354
    AOIS | AOIU | AORB | COI | COR | LOI | ROR |
     128 |   11 |   36 |  24 |  14 |  43 |  98 |
      Total muts handled:  354
    
      Mutants: [duplicated]
         COI_7 :  ['ROR_33']
         COI_8 :  ['ROR_40']
         COI_2 :  ['ROR_8']
         COI_1 :  ['ROR_1']
         AORB_2 :  ['AORB_1', 'AORB_3', 'AOIS_24', 'LOI_7']
         ROR_15 :  ['COI_4']
         COI_15 :  ['ROR_52']
         COI_16 :  ['ROR_61']
         COI_19 :  ['ROR_75']
         COI_20 :  ['ROR_80']
         COI_22 :  ['ROR_89']
         ROR_47 :  ['COI_9']
         ROR_26 :  ['COI_6']
         ROR_94 :  ['COI_23']
         ROR_66 :  ['COI_17']
    AOIS | AORB | COI | LOI | ROR |
       1 |    3 |  14 |   1 |  14 |
      Total muts handled:  33
    
    Stats
            AOIS |         AORB |          COI |         LOI |          ROR |
        1 (0.01) |     3 (0.08) |    14 (0.58) |    1 (0.02) |    14 (0.14) |
      Total muts handled:  33
    
    Total number of Duplicated muts: 18 (0.05)
    Finished:  155.242000103  secs
    
    *** Total Statistics ***
    
     ** ALL MUTS ** 
    AOIS | AOIU | AORB | COI | COR | LOI | ROR |
     128 |   11 |   36 |  24 |  14 |  43 |  98 |
      Total muts handled:  354
    
     ** DUP MUTS ** 
            AOIS |         AORB |          COI |         LOI |          ROR |
        1 (0.01) |     3 (0.08) |    14 (0.58) |    1 (0.02) |    14 (0.14) |
      Total muts handled:  33
    
    
    Total number of Duplicated muts: 18 (0.05)
    Total muts:  354